{% extends "base_general.html" %}
{% load static %}
{% block titulo %} SGI - Lista de Empleados {% endblock %}
{% block cargarTablas %}

{% endblock %}
{% block contenido %}
<link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.css"/>
{% if user.is_authenticated %}
{% if user.is_superuser %}

<table id="employeesTable" class="table table-striped">
    <thead>
    <tr>
        <!-- Campos de la tabla (entregados en el archivo models.py)-->
        <th>RUT</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Cargo</th>
        <th>Estado</th>
    </tr>
    </thead>
    <tbody>
    <!--
      Cuerpo de la tabla
      Si el parámetro "empleados" entregado en el archivo views.py
      contiene información, entonces realiza un for, recorriendo
      cada conjunto de datos.
    -->
    {% if empleados %} {% for emp in empleados %}
    <tr>
        <!-- Campos de cada empleado -->
        <td>{{emp.rut}}</td>
        <td>{{emp.nombre}}</td>
        <td>{{emp.email}}</td>
        <td>{{emp.cargo}}</td>
        <td>{{emp.estado}}</td>
    </tr>
    {% endfor %} {% else %}
    <!-- Fin del for. Else para cuando no existen empleados en la tabla -->
    <tr>
        <h3>NO HAY EMPLEADOS</h3>
    </tr>
    {% endif %}
    <!-- Fin del if -->
    </tbody>
    <!--
    Pie de tabla. Por si se quieren mostrar los campos en la parte
    inferior de la tabla.
    <tfoot>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Teléfono</th>
      </tr>
    </tfoot>
     -->
</table>

{% else %}

<p>Acceso denegado</p>

{% endif %}
{% else %}

<p>No has iniciado sesión</p>
<a href="{% url 'login' %}">Iniciar sesión</a>

{% endif %}

{% endblock %}
{% block scriptsTablas %}
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/2.3.4/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.3.4/js/dataTables.bootstrap5.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.5/js/dataTables.buttons.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.5/js/buttons.bootstrap5.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.5/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.5/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.5/js/buttons.colVis.min.js"></script>

<script>
    new DataTable("#employeesTable", {
        layout: {
            topStart: {
                buttons: ["copy", "excel", "pdf", "colvis"],
            },
        },
        language: {
            url: "https://cdn.datatables.net/plug-ins/2.3.4/i18n/es-ES.json",
        },
    });
</script>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"
></script>
{% endblock %}
